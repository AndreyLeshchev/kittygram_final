![example workflow](https://github.com/AndreyLeshchev/kittygram_final/workflows/Kittygram%20workflow/badge.svg)

# Как запустить проект:

1. Клонировать репозиторий и перейти в него в командной строке:

    ```
    git clone https://github.com/yandex-praktikum/kittygram_backend.git
    ```
    ```
    cd kittygram_backend
    ```

    Cоздать и активировать виртуальное окружение:
    
    ```
    python3 -m venv env
    ```
    
    * Если у вас Linux/macOS
    
        ```
        source env/bin/activate
        ```
    
    * Если у вас windows
    
        ```
        source venv/Scripts/activate
        ```
    
    Установить зависимости из файла requirements.txt:
    ```
    python3 -m pip install --upgrade pip
    ```
    ```
    pip install -r requirements.txt
    ```
    
    Выполнить миграции:
    
    ```
    python3 manage.py migrate
    ```
    
    Для переменных окружения в директории проекта создаем файл .env со следующим содержимым: 
    
    ```
    - POSTGRES_USER — имя пользователя БД (необязательная переменная, значение по умолчанию — postgres);
    - POSTGRES_PASSWORD — пароль пользователя БД (обязательная переменная для создания БД в контейнере);
    - POSTGRES_DB — название базы данных (необязательная переменная, по умолчанию совпадает с POSTGRES_USER).
    - DB_HOST — адрес, по которому Django будет соединяться с базой данных. При работе нескольких контейнеров в сети Docker network вместо адреса указывают имя контейнера, где запущен сервер БД, — в нашем случае это контейнер db.
    - DB_PORT — порт, по которому Django будет обращаться к базе данных. 5432 — это порт по умолчанию для PostgreSQL.
    - DEBUG = включать/выключать отладочный режим приложения в зависимости от текущего окружения (необязательная переменная, значение по умолчанию — False)
    - ALLOWED_HOSTS = список хостов/доменов, для которых может работать текущий сайт (необязательная переменная, значение по умолчанию — 127.0.0.1, localhost).
    - USE_DB - возможность сменить базу данных sqlite/postgresql (необязательная переменная, значение по умолчанию — postgresql).
    ```
2. Подготовка проекта для развертывания на сервере: 

#  Как работать с репозиторием финального задания

## Что нужно сделать

Настроить запуск проекта Kittygram в контейнерах и CI/CD с помощью GitHub Actions

## Как проверить работу с помощью автотестов

В корне репозитория создайте файл tests.yml со следующим содержимым:
```yaml
repo_owner: ваш_логин_на_гитхабе
kittygram_domain: полная ссылка (https://доменное_имя) на ваш проект Kittygram
taski_domain: полная ссылка (https://доменное_имя) на ваш проект Taski
dockerhub_username: ваш_логин_на_докерхабе
```

Скопируйте содержимое файла `.github/workflows/main.yml` в файл `kittygram_workflow.yml` в корневой директории проекта.

Для локального запуска тестов создайте виртуальное окружение, установите в него зависимости из backend/requirements.txt и запустите в корневой директории проекта `pytest`.

## Чек-лист для проверки перед отправкой задания

- Проект Taski доступен по доменному имени, указанному в `tests.yml`.
- Проект Kittygram доступен по доменному имени, указанному в `tests.yml`.
- Пуш в ветку main запускает тестирование и деплой Kittygram, а после успешного деплоя вам приходит сообщение в телеграм.
- В корне проекта есть файл `kittygram_workflow.yml`.
